"use strict";function computeShop(){for(var t=document.querySelectorAll(".Gou "),e=0,o=0;o<t.length;o++)if("Gou active"==t[o].className){var a=$(t[o]),n=a.parent().parent().find(".shop_price").text(),c=a.parent().parent().find("#number").text(),l=Number(n)*Number(c);console.log(l),e+=l}$("#total_sum").html(e)}function getShopnum(){for(var t=document.querySelectorAll(".Gou"),e=0,o=0;o<t.length;o++)console.log(t[o]),"Gou active"==t[o].className&&(e+=1),console.log(t[o].className);$("#phoneShap").html(e)}$(function(){if(localStorage.getItem("xiaomi")){var t=localStorage.getItem("xiaomi");arr=JSON.parse(t);var e=arr.length,n=0;for(t=0;t<arr.length;t++){obj=arr[t],console.log(obj),console.log(t);var o='<div class="shopGoods" index="'.concat(t,'">\n\t\t\t\t<div class="shop_check ">\n\t\t\t\t\t<i class="Gou move">√</i>\n\t\t\t\t</div>\n\t\t\t\t<div class="shop_img" ></div>\n\t\t\t\t<div class="shop_name">').concat(obj.name,'</div>\n\t\t\t\t<div class="shop_color">').concat(obj.iphoneColor+" "+obj.type,'</div>\n\t\t\t\t<div class="shop_price">').concat(obj.price,'</div>\n\t\t\t\t<div class="shop_num">\n\t\t\t\t\t<div id="count">\n\t\t\t\t\t\t<span class="minus">-</span>\n\t\t\t\t\t\t<span id=\'number\'>').concat(obj.tok,'</span>\n\t\t\t\t\t\t<span class="add">+</span>\t\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="shop_total">').concat(obj.tok*obj.price,'元</div>\n\t\t\t\t<div class="shop_action">×</div>\n\t\t\t</div>');o=$(o),$("main").append(o),$(".shop_img").css({background:"url("+obj.phoneurl+") no-repeat"})}$(".minus").on("click",function(){var t=$(event.target),e=Number(t.next().text());--e<=0&&(e=0),t.next().html(e),t.parent().parent().next().html(t.next().text()*t.parent().parent().prev().text()+"元"),computeShop()}),$(".add").on("click",function(){var t=$(event.target),e=Number(t.prev().text());e++,t.prev().html(e),t.parent().parent().next().html(t.prev().text()*t.parent().parent().prev().text()+"元"),computeShop()}),$(".col_check").click(function(){$(".col_check i").toggleClass("move"),$(".col_check i").toggleClass("active"),"move_check active"==$(".col_check i").attr("class")?($(".shop_check i").attr("class",""),$(".shop_check i").addClass("Gou active"),n=arr.length,$("#phoneShap").html(n),computeShop()):"move_check move"==$(".col_check i").attr("class")&&($(".shop_check i").attr("class",""),$(".shop_check i").addClass("Gou move"),n=0,$("#phoneShap").html(n),computeShop()),getShopnum()}),$(".Gou").on("click",function(){var t=$(event.target);t.toggleClass("move"),t.toggleClass("active");for(var e=document.querySelectorAll(".Gou "),o=0,a=0;a<e.length;a++)console.log(e[a]),"Gou active"==e[a].className&&(o+=1,console.log(n)),console.log(e[a].className);computeShop(),$("#phoneShap").html(o)});var a=localStorage.xiaomi||"[]";a=JSON.parse(a),$(".shopGoods").on("click","div",function(){var t=$(event.target);"shop_action"==t.attr("class")&&(console.log(t.parent()),console.log(t.parent().index()-2),a.splice(t.parent().index()-2,1),localStorage.xiaomi=JSON.stringify(a),t.parent().remove(),e--,$("#numberShap").html(e),computeShop(),getShopnum())}),$("#numberShap").html(e),$("#phoneShap").html(n)}else $("main").html("您的购物车是空的"),$("main").css({"font-size":"32px",color:"#000","text-align":"center","line-height":"60px"})});